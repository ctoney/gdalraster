<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a GDAL in-memory dataset from R data without copying — vector_to_MEM • gdalraster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a GDAL in-memory dataset from R data without copying — vector_to_MEM"><meta name="description" content="vector_to_MEM() creates a GDAL MEM dataset that references pixel data in
an existing R vector. It returns an object of class GDALRaster for a
writable in-memory dataset without copying the source data. The underlying
R object is protected from garbage collection until the returned dataset is
closed. GDAL MEM datasets support most kinds of auxiliary information
including metadata, coordinate systems, georeferencing, color interpretation,
nodata, color tables and all pixel data types (see Details)."><meta property="og:description" content="vector_to_MEM() creates a GDAL MEM dataset that references pixel data in
an existing R vector. It returns an object of class GDALRaster for a
writable in-memory dataset without copying the source data. The underlying
R object is protected from garbage collection until the returned dataset is
closed. GDAL MEM datasets support most kinds of auxiliary information
including metadata, coordinate systems, georeferencing, color interpretation,
nodata, color tables and all pixel data types (see Details)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gdalraster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.4.0.9091</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/raster-api-tutorial.html">Raster API Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/raster-display.html">Raster Display</a></li>
    <li><a class="dropdown-item" href="../articles/raster-attribute-tables.html">Raster Attribute Tables</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-block-cache.html">GDAL Block Cache</a></li>
    <li><a class="dropdown-item" href="../articles/vector-api-overview.html">Vector API Overview</a></li>
    <li><a class="dropdown-item" href="../articles/vector-read-benchmarks.html">Vector Read Benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-config-quick-ref.html">GDAL Config Quick Reference</a></li>
    <li><a class="dropdown-item" href="../articles/use-gdal-cli-from-r.html">Using 'gdal' CLI algorithms from R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Archived articles</h6></li>
    <li><a class="dropdown-item" href="../articles/gdalvector-draft.html">Draft Bindings to the GDAL/OGR Vector API</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/firelab/gdalraster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a GDAL in-memory dataset from R data without copying</h1>
      <small class="dont-index">Source: <a href="https://github.com/firelab/gdalraster/blob/main/R/gdal_helpers.R" class="external-link"><code>R/gdal_helpers.R</code></a></small>
      <div class="d-none name"><code>vector_to_MEM.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>vector_to_MEM()</code> creates a GDAL MEM dataset that references pixel data in
an existing R vector. It returns an object of class <code>GDALRaster</code> for a
writable in-memory dataset without copying the source data. The underlying
R object is protected from garbage collection until the returned dataset is
closed. GDAL MEM datasets support most kinds of auxiliary information
including metadata, coordinate systems, georeferencing, color interpretation,
nodata, color tables and all pixel data types (see Details).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vector_to_MEM</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">xsize</span>,</span>
<span>  <span class="va">ysize</span>,</span>
<span>  nbands <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  gt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bbox <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  srs <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>An R vector of type <code>"double"</code>, <code>"integer"</code>, <code>"raw"</code> or
<code>"complex"</code>, containing pixel values to be exposed as a GDAL in-memory
raster. The pixels must be arranged in left-to-right, top-to-bottom order
interleaved by band. <code>length(data)</code> must equal <code>xsize * ysize * nbands</code>.</p></dd>


<dt id="arg-xsize">xsize<a class="anchor" aria-label="anchor" href="#arg-xsize"></a></dt>
<dd><p>Integer value giving the number of raster columns.</p></dd>


<dt id="arg-ysize">ysize<a class="anchor" aria-label="anchor" href="#arg-ysize"></a></dt>
<dd><p>Integer value giving the number of raster rows.</p></dd>


<dt id="arg-nbands">nbands<a class="anchor" aria-label="anchor" href="#arg-nbands"></a></dt>
<dd><p>Integer value giving the number of raster bands.</p></dd>


<dt id="arg-gt">gt<a class="anchor" aria-label="anchor" href="#arg-gt"></a></dt>
<dd><p>A numeric vector of length six containing the affine geotransform
for the raster. Defaults to <code>c(0, 1, 0, 0, 0, 1)</code> if neither <code>gt</code> nor <code>bbox</code>
are given.</p></dd>


<dt id="arg-bbox">bbox<a class="anchor" aria-label="anchor" href="#arg-bbox"></a></dt>
<dd><p>A numeric vector of length four containing the raster bounding
box geospatial coordinates (<code>c(xmin, ymin, xmax, ymax)</code>). Ignored if <code>gt</code> is
given.</p></dd>


<dt id="arg-srs">srs<a class="anchor" aria-label="anchor" href="#arg-srs"></a></dt>
<dd><p>Optional character string containing the raster spatial reference
coordinate system as a WKT string. <code><a href="srs_convert.html">epsg_to_wkt()</a></code> or <code><a href="srs_convert.html">srs_to_wkt()</a></code> can be
used to convert from other formats to WKT if necessary.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>GDALRaster</code> providing a GDAL MEM dataset with
write access pointing to the underlying C array for <code>data</code>. The R object
referenced by <code>data</code> is protected from garbage collection during the lifetime
of the returned dataset, i.e., until its <code>$close()</code> is called or the dataset
object itself is garbage collected. An error is raised if creation of the
MEM dataset fails.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The returned dataset is open with write access. Methods of the <code>GDALRaster</code>
object can be called to modify dataset and band properties, e.g., to set
nodata values, metadata items, band descriptions, color tables, etc. The
original R vector will be modified in place if the object's <code>$write()</code>
method is used.</p>
<p>The MEM dataset will have a GDAL data type matching the type of the
input vector:</p><table class="table table"><tr><td><strong>R vector type</strong></td><td><strong>GDAL raster type</strong></td></tr><tr><td>double</td><td>Float64</td></tr><tr><td>integer</td><td>Int32</td></tr><tr><td>raw</td><td>UInt8 (Byte in GDAL &lt; 3.13)</td></tr><tr><td>complex</td><td>CFloat64</td></tr></table></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The <code>$close()</code> method should be called when the <code>GDALRaster</code> object is no
longer needed so that resources can be freed. MEM datasets cannot be
re-opened once the object's <code>$close()</code> method has been called.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="GDALRaster-class.html">GDALRaster-class</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">255</span>, <span class="fl">50</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">ds_mem</span> <span class="op">&lt;-</span> <span class="fu">vector_to_MEM</span><span class="op">(</span><span class="va">v</span>, xsize <span class="op">=</span> <span class="fl">10</span>, ysize <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> failed to get projection ref</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> C++ object of class GDALRaster</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Driver : In Memory Raster (MEM)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  DSN    : MEM:::DATAPOINTER=0x55c86ce34d20,PIXELS=10,LINES=5,BANDS=1,DATATYPE=Int32,GEOTRANSFORM=0/1/0/0/0/1,BANDOFFSET=200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Dim    : 10, 5, 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  CRS    : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Res    : 1.000000, 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Bbox   : 0.000000, 0.000000, 10.000000, 5.000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="op">(</span><span class="va">ds_mem</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span> <span class="op">==</span> <span class="va">v</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ds_mem</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="op">(</span><span class="va">v</span> <span class="op">*</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  -10  -25  -21 -140 -112 -190 -227   -1 -179  -34 -176 -214 -189 -118  -20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] -183 -132 -135 -243 -201  -64 -135 -224  -47  -51  -78 -224  -11  -31  -77</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] -195  -51 -124  -44  -81  -52 -188 -189  -42 -121  -75  -49 -132 -160  -63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] -166  -58 -109    0  -90</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ds_mem</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chris Toney, Michael D. Sumner.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

